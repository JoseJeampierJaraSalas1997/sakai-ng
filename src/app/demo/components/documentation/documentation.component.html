<div class="col-12">
    <div class="card p-fluid">
        <h5>Productos Seleccionados</h5>

        <p-table
            [value]="productosSeleccionados"
            [paginator]="true"
            [rows]="10"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Precio</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-producto>
                <tr>
                    <td>{{ producto.id }}</td>
                    <td>{{ producto.nombre }}</td>
                    <td>S/. {{ +producto.precio.toFixed(2) }}</td>
                    <td>{{ producto.cantidad }}</td>
                    <td>
                        S/.
                        {{ (+producto.precio * producto.cantidad).toFixed(2) }}
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="footer">
                <tr>
                    <td colspan="3"></td>
                    <td>Total a pagar:</td>
                    <td>S/. {{ this.totalAPagar }}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>

<div class="carousel-container">
    <p-carousel [value]="images" [numVisible]="3" [numScroll]="1">
        <ng-template let-image pTemplate="item">
            <img
                [src]="image"
                alt="Slide"
                style="
                    max-width: 500px;
                    max-height: 300px;
                    width: auto;
                    height: auto;
                "
            />
        </ng-template>
    </p-carousel>
</div>

<form class="grid" (submit)="enviarDatosAlBackend($event, form.value)">
    <div class="col-12">
        <div class="card p-fluid">
            <h5>Datos de envío</h5>

            <div class="field">
                <label for="codigoestudiante">Código de estudiante</label>
                <select
                    pInputText
                    id="codigoestudiante"
                    formControlName="codigoestudiante"
                >
                    <option
                        value=""
                        [attr.selected]="
                            !form.get('codigoestudiante').value
                                ? 'selected'
                                : null
                        "
                    >
                        Selecciona un código de estudiante
                    </option>
                    <option
                        *ngFor="let user of userInfoConsulta"
                        [value]="user.id"
                    >
                        {{ user.nombre }}
                    </option>
                </select>
            </div>

            <div class="field">
                <label for="tpago" class="label">Tipo de pago</label>
                <div class="select-container">
                    <select
                        pInputText
                        id="tpago"
                        formControlName="tpago"
                        class="custom-select"
                    >
                        <option value="" disabled selected>
                            Selecciona un metodo
                        </option>
                        <option value="Efectivo">Efectivo</option>
                        <option value="Tarjeta">Tarjeta</option>
                        <option value="Yape">Yape</option>
                        <option value="Plin">Plin</option>
                    </select>
                </div>
            </div>

            <div class="field">
                <label for="ubicacionrecojo" class="label"
                    >Ubicación de recojo</label
                >
                <div class="select-container">
                    <select
                        pInputText
                        id="ubicacionrecojo"
                        formControlName="ubicacionrecojo"
                        class="custom-select"
                    >
                        <option value="" disabled selected>
                            Selecciona una ubicación
                        </option>
                        <option value="Pasillo del comedor">
                            Pasillo del comedor
                        </option>
                        <option value="Aula A">Aula A</option>
                        <option value="Aula B">Aula B</option>
                        <option value="Recojo en tienda">
                            Recojo en tienda
                        </option>
                    </select>
                </div>
            </div>

            <div class="field">
                <label for="celular">Número de celular</label>
                <input
                    pInputText
                    id="celular"
                    type="number"
                    formControlName="celular"
                />
            </div>
            <button
                type="submit"
                class="p-button p-primary p-col-12"
                style="
                    margin-top: 20px;
                    text-align: center;
                    font-size: 1.5rem;
                    color: rgb(255, 255, 255);
                    display: block;
                    margin-left: auto;
                    margin-right: auto;
                    background-color: chocolate;
                    border-color: chocolate;
                "
            >
                Enviar
            </button>
        </div>
    </div>
</form>
